<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>Dynamic Card</title>

  <!-- 全域 CSS -->
  <link rel="stylesheet" href="static/css/style.css" />

  <!-- QRCode.js CDN -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
  ></script>

  <!-- 根據系統偏好自動套用主題 -->
  <script>
    const savedTheme = localStorage.getItem('theme');
    if (savedTheme) {
      document.documentElement.classList.add(savedTheme);
    } else if (
      window.matchMedia('(prefers-color-scheme: dark)').matches
    ) {
      document.documentElement.classList.add('dark');
    }
  </script>
</head>
<body>
  <main>
    <section class="card" aria-label="個人資訊卡片">
      <!-- 頭像與名稱 -->
      <div class="header">
        <h2>David Lin</h2>
        <img
          src="static/img/avatar.jpg"
          alt="David Lin Profile"
          class="avatar"
          id="avatar-trigger"
          loading="lazy"
        />
      </div>

      <!-- 職稱 -->
      <p>Engineer at @AMI</p>

      <!-- 社群連結 -->
      <ul class="social-links" aria-label="社群連結">
        <li>
          <a href="https://github.com/PugDoggie" target="_blank" rel="noopener">
            GitHub
          </a>
        </li>
        <li>
          <a
            href="https://www.linkedin.com/in/david-lin-048948268"
            target="_blank"
            rel="noopener"
          >
            LinkedIn
          </a>
        </li>
        <li>
          <a href="mailto:davidlin@ami.com">Email</a>
        </li>
      </ul>

      <!-- 聯絡資訊 -->
      <section class="contact-info" aria-label="聯絡資訊">
        <p class="contact-item">
          <strong>Address：</strong>
          36F., No. 95 Sec. 1, Xintai 5th Rd., Xizhi Dist.
        </p>
        <p class="contact-item">
          <strong>Mobile：</strong>
          <a href="tel:+886975126962">+886 975 126 962</a>
        </p>
      </section>

      <!-- 技能進度條 -->
      <section class="skills" aria-label="技能">
        <h3>Skills</h3>
        <div class="skill">
          <span>Python</span>
          <div class="bar">
            <div class="fill" 
            style="--pct:90%; --fill-color: #f0db4f;"></div>
          </div>
        </div>
        <div class="skill">
          <span>Server Management</span>
          <div class="bar">
            <div class="fill" 
            style="--pct:80%; --fill-color: #61dafb;"></div>
          </div>
        </div>
        <div class="skill">
          <span>Jira / Gitlab</span>
          <div class="bar">
            <div class="fill" 
            style="--pct:75%; --fill-color:#FF6347;"></div>
          </div>
        </div>
        <div class="skill">
          <span>Business Communication / Promotion</span>
          <div class="bar">
            <div class="fill" 
            style="--pct:75%; --fill-color:#8A2BE2;"></div>
          </div>
        </div>
      </section>
      
      <!-- 個人經驗 -->
      <section class="experience-info" aria-label="經歷">
        <p class="experience-item">
          <strong>Experience:</strong><br>
          Computex 2024<br>
          Computex 2025<br>
          OCP APAC 2025
        </p>
      </section>
      
      <!-- 證照 -->
      <section class="license-info" aria-label="證照">
        <p class="license-item">
          <strong>License:</strong><br>
          TOEIC 740<br>
          ITS Python<br>
          CIIE Quality management technologist
        </p>
      </section>

      <!-- 切換主題 -->
      <button id="toggle-theme" aria-label="切換主題">
        Dark Mode
      </button>

      <!-- QR Code 浮層 -->
      <div id="qr-overlay">
        <div id="qrcode-overlay"></div>
      </div>
    </section>
  </main>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const html = document.documentElement;
      const toggleBtn = document.getElementById('toggle-theme');
      const avatar = document.getElementById('avatar-trigger');
      const qrOverlay = document.getElementById('qr-overlay');
      const qrContainer = document.getElementById('qrcode-overlay');

      // 切換主題
      toggleBtn.addEventListener('click', () => {
        html.classList.toggle('dark');
        const isDark = html.classList.contains('dark');
        toggleBtn.textContent = isDark ? 'Light Mode' : 'Dark Mode';
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
      });

      // 顯示 QR Code
      avatar.addEventListener('click', () => {
        qrOverlay.classList.add('active');
        qrContainer.innerHTML = '';
        new QRCode(qrContainer, {
          text:
            'https://pda.104.com.tw/profile/share/djeUuqhOscI09KZ5tgsC6zQHj1lKZ6ey',
          width: 192,
          height: 192,
          colorDark: '#000000',
          colorLight: '#ffffff',
          correctLevel: QRCode.CorrectLevel.H
        });
      });

      // 點擊浮層任意處關閉
      qrOverlay.addEventListener('click', () => {
        qrOverlay.classList.remove('active');
        qrContainer.innerHTML = '';
      });
    });
  </script>
</body>
</html>