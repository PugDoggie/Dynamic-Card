<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  />
  <title>Dynamic Card</title>

  <!-- 全域 CSS -->
  <link rel="stylesheet" href="static/css/style.css" />

  <!-- QRCode.js CDN -->
  <script
    src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"
  ></script>

  <!-- 根據系統偏好自動套用主題 -->
  <script>
    if (
      window.matchMedia("(prefers-color-scheme: dark)").matches
    ) {
      document.documentElement.classList.add("dark");
    }
  </script>

  <!-- 主題切換與浮層動畫 -->
  <style>
    body,
    .card,
    .avatar {
      transition: background-color 0.3s, color 0.3s,
        border-color 0.3s;
    }
    .avatar {
      cursor: pointer;
    }
    #qr-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.6);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 999;
    }
    #qr-overlay.active {
      display: flex;
    }
    #qrcode-overlay {
      background: #fff;
      padding: 1rem;
      border-radius: 8px;
    }
    .dark #qrcode-overlay {
      background: #333;
    }
  </style>
</head>
<body>
  <main>
    <section class="card" aria-label="個人資訊卡片">
      <div class="header">
        <h2>David Lin</h2>
        <img
          src="static/img/avatar.jpg"
          alt="David Lin Profile"
          class="avatar"
          id="avatar-trigger"
          loading="lazy"
        />
      </div>

      <p>Engineer at @AMI</p>

      <ul class="social-links" aria-label="社群連結">
        <li>
          <a
            href="https://github.com/PugDoggie"
            target="_blank"
            rel="noopener"
          >
            GitHub
          </a>
        </li>
        <li>
          <a
            href="https://www.linkedin.com/in/david-lin-048948268"
            target="_blank"
            rel="noopener"
          >
            LinkedIn
          </a>
        </li>
        <li>
          <a href="mailto:davidlin@ami.com">Email</a>
        </li>
      </ul>

      <!-- 新增：地址與電話 -->
      <section class="contact-info" aria-label="聯絡資訊">
        <p class="contact-item">
          <strong>Address：</strong>36F., No. 95 Sec. 1, Xintai 5th Rd., Xizhi Dist.
        </p>
        <p class="contact-item">
          <strong>Mobile：</strong>
          <a href="tel:+886123456789">+886 975-126962</a>
        </p>
      </section>

      <button id="toggle-theme" aria-label="切換主題">
        Dark Mode
      </button>

      <!-- QR Code 浮層 -->
      <div id="qr-overlay">
        <div id="qrcode-overlay"></div>
      </div>
    </section>
    <section class="skills" aria-label="技能">
	  <h3>Skills</h3>
	  <div class="skill">
	    <span>JavaScript</span>
	    <div class="bar"><div class="fill" style="--pct:90%"></div></div>
	  </div>
	  <div class="skill">
	    <span>React</span>
	    <div class="bar"><div class="fill" style="--pct:80%"></div></div>
	  </div>
	  <div class="skill">
	    <span>CSS / SCSS</span>
	    <div class="bar"><div class="fill" style="--pct:75%"></div></div>
	  </div>
	</section>
    
  </main>

  <script>
    const toggleBtn = document.getElementById("toggle-theme");
    toggleBtn.addEventListener("click", () => {
      document.documentElement.classList.toggle("dark");
      toggleBtn.textContent = document.documentElement.classList.contains(
        "dark"
      )
        ? "Light Mode"
        : "Dark Mode";
    });

    // 點擊頭像顯示 QR Code 浮層
    document
      .getElementById("avatar-trigger")
      .addEventListener("click", () => {
        const overlay = document.getElementById("qr-overlay");
        const qrContainer = document.getElementById("qrcode-overlay");
        overlay.classList.add("active");
        qrContainer.innerHTML = "";
        new QRCode(qrContainer, {
          text:
            "https://pda.104.com.tw/profile/share/djeUuqhOscI09KZ5tgsC6zQHj1lKZ6ey",
          width: 192,
          height: 192,
          colorDark: "#000000",
          colorLight: "#ffffff",
          correctLevel: QRCode.CorrectLevel.H,
        });
      });

    // 點擊浮層任意區域關閉 QR Code
    document
      .getElementById("qr-overlay")
      .addEventListener("click", () => {
        document
          .getElementById("qr-overlay")
          .classList.remove("active");
        document.getElementById("qrcode-overlay").innerHTML = "";
      });
  </script>
</body>
</html>